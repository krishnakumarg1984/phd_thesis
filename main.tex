%! TEX program = lualatex
% vim:nospell

\RequirePackage{shellesc} % unified shell-escape interface
\RequirePackage[debrief]{silence}
\RequirePackage[l2tabu, orthodox]{nag}
\providecommand{\pdfxopts}{a-1b}
\immediate\write18{rm \jobname.xmpdata} % uncomment for Unix-based systems
\begin{filecontents*}{\jobname.xmpdata}
    \Title{Towards application of physics-based lithium ion battery models in electric vehicles : analysis, design and implementation}
    \Author{Krishnakumar Gopalakrishnan}
    % \CoverDate{\today}
    \Copyright{The copyright  of  this thesis  rests  with the  author  and is  made available  under a  Creative Commons  Attribution Non-Commercial  No Derivatives licence. Researchers are free to copy,  distribute or transmit the thesis on the condition  that they  attribute  it, that  they  do not  use  it for  commercial purposes and that they  do not alter, transform or build upon  it. For any reuse or redistribution,  researchers must make clear  to others the licence  terms of this work.}
    \CopyrightURL{https://creativecommons.org/licenses/by-nc-nd/3.0/}
    \Creator{LuaTeX + pdfx.sty with options \pdfxopts}
    \Keywords{Lithium-ion batteries \sep electric vehicles \sep mathematical modelling}
    \Publisher{Imperial College London}
    \PublicationType{book}
    \pdfxSetRGBcolorProfileDir{icc_profiles/sRGB_IEC61966-2-1_black_scaled.icc}
    \pdfxSetCMYKcolorProfileDir{icc_profiles/coated_FOGRA39L_argl.icc}
\end{filecontents*}
\documentclass[12pt,a4paper,oneside,openright]{book}
\PassOptionsToPackage{table}{xcolor}
\PassOptionsToPackage{luatex}{pdflscape}
\usepackage[\pdfxopts]{pdfx}
\input{Preamble/preamble}
\makeglossaries % must be before starting to define any entries for the glossary. And, all glossary definitions (such as for symbols and any other custom glossaries) must come before this.
% no hyperlink on first use for entries with category=acronym
\glssetcategoryattribute{acronym}{nohyperfirst}{true} % https://tex.stackexchange.com/questions/434160/line-break-long-glossaries-entry-when-using-hyperref-and-latex-dvips-ps2pdf
\setabbreviationstyle[acronym]{long-short} % applicable only for glossaries-extra.sty
\input{0_frontmatter/acronyms}
\includeonly{%
    introduction/intro,
    % litt_review/litt_review,
    % layer_opt/layer_opt,
    % dra/improved_dra,
    % spm_analysis/spm_analysis,
    % sys_id/sys_id,
    % Appendices/appendix1,
    % Appendices/appendix2,
}%
\begin{document}
\scrollmode

\setstretch{1.348361657291667} % golden-ratio stretch (1.2 x 1.348 = 1.618)

\frontmatter
\pagenumbering{arabic}
\noindent
\begin{varwidth}[c]{0.4\textwidth}
    % This  work  is  licensed  under  aCreative  Commons  ‘Attribution-NonCommercial-NoDerivs  3.0  Unported’licence
    % https://www.imperial.ac.uk/research-and-innovation/support-for-staff/scholarly-communication/open-access/spiral/licences-and-policies/
    \includegraphics{9_backmatter/doclicense-CC-by-nc-nd.pdf}
\end{varwidth}
\hfill
\begin{varwidth}[c]{0.70\textwidth}
    \doclicenseLongText
\end{varwidth}

\bigskip
\noindent  The copyright  of  this thesis  rests  with the  author  and is  made
available  under a  Creative Commons  Attribution Non-Commercial  No Derivatives
licence. Researchers are free to copy,  distribute or transmit the thesis on the
condition  that they  attribute  it, that  they  do not  use  it for  commercial
purposes and that they  do not alter, transform or build upon  it. For any reuse
or redistribution,  researchers must make clear  to others the licence  terms of
this work.

%: ----------------------- contents ------------------------
\cleardoublepage
\glsunsetall
\microtypesetup{protrusion=false} % disables protrusion locally in the document
% \pdfbookmark[<level>]{<title>}{<dest>}
\pdfbookmark[section]{\contentsname}{toc}
\tableofcontents            % print the table of contents

%: ----------------------- list of figures/tables ------------------------
\cleardoublepage
\listoffigures  % print list of figures
\cleardoublepage
\listoftables   % print list of tables
\cleardoublepage
\listofalgorithms
\addcontentsline{toc}{chapter}{List of Algorithms}
\cleardoublepage
\begingroup
\parskip=0pt
\tcblistof[\chapter*]{mypyg}{List of Program Code}
\endgroup
\cleardoublepage
\glsresetall
\begingroup
% \setlength\LTleft{-5pt}
% \printglossaries
\printglossary[type=acronym,title={List of Acronyms}]\label{ch:glossary} % basic style
% \printglossary[type=abbreviation, title={List of Acronyms}]\label{ch:glossary} % basic style
% \printglossary[type=acronym, style = superragged3colheader, title={List of Acronyms}]\label{ch:glossary}
% \printglossary[type=acronym, style = custom_acronyms,title={List of Acronyms}]\label{ch:glossary}
% \printglossary[type=acronym, style = super,title={List of Acronyms}]\label{ch:glossary}
\endgroup
\microtypesetup{protrusion=true} % re-enables protrusion

\makeatletter
\@mainmattertrue
\makeatother
\cleardoublepage

\include{introduction/intro}          % Introduction
\include{litt_review/litt_review}     % Literature Review
\include{layer_opt/layer_opt}         % Layer Optimisation
\include{dra/improved_dra}            % Improved DRA
\include{spm_analysis/spm_analysis}   % Analysis of SPM
\include{sys_id/sys_id}               % New Electrolye Model

\backmatter
\begin{footnotesize} % tiny(5) < scriptsize(7) < footnotesize(8) < small (9)
    \renewcommand{\bibname}{References} % changes the header; default: Bibliography
    % add bib to toc
    \cleardoublepage
    \phantomsection
    \addcontentsline{toc}{chapter}{\bibname}
    \printbibliography
\end{footnotesize}

\makeatletter
\@mainmattertrue
\makeatother
\cleardoublepage

\begin{appendices} % Using appendices environment for more functionality
    \crefalias{chapter}{appchap}
    \include{Appendices/appendix1}
    \include{Appendices/appendix2}
\end{appendices}

\batchmode
\end{document}
