% vim:nospell
\newcommand{\etal}{\textit{et al}.}
\newcommand{\ie}{\textit{i}.\textit{e}.,}
\newcommand{\eg}{\textit{e}.\textit{g}.}
\newcommand{\viz}{\textit{viz}. }
\newcommand{\jinnegpos}{\ensuremath{j  ∈  \left\{\text{neg, pos}\right\}}}
\newcommand{\jinnegposordered}{\ensuremath{j  \in  \left(\text{neg, pos}\right)}}
\newcommand{\jinpossepneg}{\ensuremath{j  ∈  \left\{\text{pos, sep, neg}\right\}}}
\newcommand{\sj}{\ensuremath{{\text{s}_j}}}
\newcommand{\pj}{\ensuremath{{\text{p}_j}}}
\newcommand{\pneg}{\ensuremath{{\text{p}_\text{neg}}}}
\newcommand{\ppos}{\ensuremath{{\text{p}_\text{pos}}}}
\newcommand{\nj}{\ensuremath{{\text{n}_j}}}
\newcommand{\npos}{\ensuremath{{\text{n}_\text{pos}}}}
\newcommand{\nneg}{\ensuremath{{\text{n}_\text{neg}}}}
\newcommand{\sjsurf}{\ensuremath{{\text{s,surf}_j}}}
\newcommand{\spossurf}{\ensuremath{{\text{s,surf}_\text{pos}}}}
\newcommand{\snegsurf}{\ensuremath{{\text{s,surf}_\text{neg}}}}
\newcommand{\sjmax}{\ensuremath{{\text{s,max}_j}}}
\newcommand{\snegmin}{\ensuremath{{\text{s,min}_\text{neg}}}}
\newcommand{\snegmax}{\ensuremath{{\text{s,max}_\text{neg}}}}
\newcommand{\sposmax}{\ensuremath{{\text{s,max}_\text{pos}}}}
\newcommand{\sjavg}{\ensuremath{{\text{s,avg}_j}}}
\newcommand{\spos}{\ensuremath{\text{s,pos}}}
\newcommand{\epos}{\ensuremath{\text{e,pos}}}
\newcommand{\sneg}{\ensuremath{\text{s,neg}}}
\newcommand{\eneg}{\ensuremath{\text{e,neg}}}
\newcommand{\jr}{\ensuremath{{\text{r}_j}}}
\newcommand{\posr}{\ensuremath{{\text{r}_\text{pos}}}}
\newcommand{\negr}{\ensuremath{{\text{r}_\text{neg}}}}
\newcommand{\maxj}{\ensuremath{{100\%_j}}}
\newcommand{\maxpos}{\ensuremath{{100\%_\text{pos}}}}
\newcommand{\maxneg}{\ensuremath{{100\%_\text{neg}}}}
\newcommand{\minpos}{\ensuremath{{0\%_\text{pos}}}}
\newcommand{\minneg}{\ensuremath{{0\%_\text{neg}}}}
\newcommand{\minj}{\ensuremath{{0\%_j}}}
\newcommand*\mean[1]{\overline{#1}}

\DeclarePairedDelimiter\abs{\lvert}{\rvert}

\renewcommand{\footnoterule}{%
    \kern -3pt
    \hrule width 0.25\textwidth height 0.5pt
    \kern 2pt
}

\hyphenation{acad-e-my acad-e-mies af-ter-thought anom-aly anom-alies
    an-ti-deriv-a-tive an-tin-o-my an-tin-o-mies apoth-e-o-ses
    apoth-e-o-sis ap-pen-dix ar-che-typ-al as-sign-a-ble as-sist-ant-ship
    as-ymp-tot-ic asyn-chro-nous at-trib-uted at-trib-ut-able bank-rupt
    bank-rupt-cy bi-dif-fer-en-tial blue-print busier busiest
    cat-a-stroph-ic cat-a-stroph-i-cally con-gress cross-hatched data-base
    de-fin-i-tive de-riv-a-tive dis-trib-ute dri-ver dri-vers eco-nom-ics
    econ-o-mist elit-ist equi-vari-ant ex-quis-ite ex-tra-or-di-nary
    flow-chart for-mi-da-ble forth-right friv-o-lous ge-o-des-ic
    ge-o-det-ic geo-met-ric griev-ance griev-ous griev-ous-ly
    hexa-dec-i-mal ho-lo-no-my ho-mo-thetic ideals idio-syn-crasy
    in-fin-ite-ly in-fin-i-tes-i-mal ir-rev-o-ca-ble key-stroke
    lam-en-ta-ble light-weight mal-a-prop-ism man-u-script mar-gin-al
    meta-bol-ic me-tab-o-lism meta-lan-guage me-trop-o-lis
    met-ro-pol-i-tan mi-nut-est mol-e-cule mono-chrome mono-pole
    mo-nop-oly mono-spline mo-not-o-nous mul-ti-fac-eted mul-ti-plic-able
    non-euclid-ean non-iso-mor-phic non-smooth par-a-digm par-a-bol-ic
    pa-rab-o-loid pa-ram-e-trize para-mount pen-ta-gon phe-nom-e-non
    post-script pre-am-ble pro-ce-dur-al pro-hib-i-tive pro-hib-i-tive-ly
    pseu-do-dif-fer-en-tial pseu-do-fi-nite pseu-do-nym qua-drat-ic
    quad-ra-ture qua-si-smooth qua-si-sta-tion-ary qua-si-tri-an-gu-lar
    quin-tes-sence quin-tes-sen-tial re-arrange-ment rec-tan-gle
    ret-ri-bu-tion retro-fit retro-fit-ted right-eous right-eous-ness
    ro-bot ro-bot-ics sched-ul-ing se-mes-ter semi-def-i-nite
    semi-ho-mo-thet-ic set-up se-vere-ly side-step sov-er-eign spe-cious
    spher-oid spher-oid-al star-tling star-tling-ly sta-tis-tics
    sto-chas-tic straight-est strange-ness strat-a-gem strong-hold
    sum-ma-ble symp-to-matic syn-chro-nous topo-graph-i-cal tra-vers-a-ble
    tra-ver-sal tra-ver-sals treach-ery turn-around un-at-tached
    un-err-ing-ly white-space wide-spread wing-spread wretch-ed
    wretch-ed-ly Eng-lish Euler-ian Feb-ru-ary Gauss-ian
    Hamil-ton-ian Her-mit-ian Jan-u-ary Japan-ese Kor-te-weg
Le-gendre Mar-kov-ian Noe-ther-ian No-vem-ber Rie-mann-ian Sep-tem-ber}

\definecolor{mintedbg}{rgb}{0.95,0.95,0.95}
\definecolor{imperialraspberry}{RGB}{145,0,72}

\definecolor{imperialbrick}{RGB}{165,25,0}
\definecolor{imperialnavy}{RGB}{0,33,71}

\definecolor{imperialblue}{RGB}{0,62,116}
\definecolor{imperiallightblue}{RGB}{0,110,175}
\definecolor{imperialnewblue}{RGB}{0,86,146}

\definecolor{imperialdarkgreen}{RGB}{2,137,59}
\definecolor{imperialprocessblue}{RGB}{0,133,202}

\definecolor{imperiallightgray}{RGB}{235,238,238}
\definecolor{imperialcoolgray}{RGB}{157,157,157}

\definecolor{intermediategray}{RGB}{196,196,196}
\definecolor{lightintergray}{RGB}{215,217,217}

\newcounter{filePrg}
\renewcommand{\CancelColor}{\color{imperialbrick}}

\stackMath
\ExplSyntaxOn
\NewDocumentCommand \vect { s o m }
{
    \IfBooleanTF {#1}
    { \vectaux*{#3} }
    { \IfValueTF {#2} { \vectaux[#2]{#3} } { \vectaux{#3} } }
    ^T
}
\DeclarePairedDelimiterX \vectaux [1] {\lbrack} {\rbrack}
{ \, \dbacc_vect:n { #1 } \, }
\cs_new_protected:Npn \dbacc_vect:n #1
{
    \seq_set_split:Nnn \l_tmpa_seq { , } { #1 }
    \seq_use:Nn \l_tmpa_seq { \enspace }
}
\ExplSyntaxOff


\newtcbinputlisting[use counter=filePrg,number within=chapter,list inside=mypyg]{\matlabcodelisting}[3][]{%
    listing engine=minted,
    minted language=matlab,
    % minted style=algol_nu, % xcode,emacs, perldoc, pastie, borland, vs, vim, tango
    listing file={#2},
    title=\small{\textbf{Listing \thetcbcounter}\quad {#1}},
    % fonttitle=\bfseries,
    listing only,
    list entry={\protect\numberline{\thetcbcounter} #1},
    enhanced jigsaw,
    breakable,
    % drop fuzzy shadow,
    minted options={
        fontsize=\scriptsize,
        breaklines,
        autogobble,
        linenos,
        numbersep=3mm,
        mathescape,
        baselinestretch=1,
        breakanywhere=true
    },
    % colback=offwhite,
    colback=white,
    colframe=imperialnavy,
    % colframe=black,
    % coltitle=white,
    % boxrule=0.2mm,
    left=5mm,
    overlay={\begin{tcbclipinterior}
            \fill[imperiallightgray] (frame.south west) rectangle ([xshift=5mm]frame.north west);
        \end{tcbclipinterior}
    },
    label=#3
}

\makeatletter % no indent for entries
\renewcommand{\l@tcolorbox}{\@dottedtocline{1}{0pt}{2.3em}}
\makeatother
