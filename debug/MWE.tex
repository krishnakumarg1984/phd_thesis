% !TEX-program = lualatex
\documentclass{book}
\usepackage[newfloat=true,chapter]{minted}
\SetupFloatingEnvironment{listing}{placement=htp}
\SetupFloatingEnvironment{listing}{name=Program code}
\SetupFloatingEnvironment{listing}{listname=List of Program code}
\usepackage{xcolor}
\definecolor{bg}{rgb}{0.95,0.95,0.95}
% \usepackage{mdframed}
% \surroundwithmdframed{minted}
\usepackage[many]{tcolorbox}
\tcbuselibrary{minted}
\newtcblisting{myjava}{listing engine=minted,
    minted style=colorful,
    minted language=java,
    minted options={fontsize=\small,breaklines,autogobble,linenos,numbersep=3mm},
    colback=blue!5!white,colframe=blue!75!black,listing only,
    left=5mm,enhanced,
    overlay={\begin{tcbclipinterior}\fill[red!20!blue!20!white] (frame.south west)
rectangle ([xshift=5mm]frame.north west);\end{tcbclipinterior}}}



\begin{document}
\listoflistings
\begin{tcblisting}{minted style=trac, listing only,
        title=Example of a listing.,fonttitle=\bfseries,
        minted language=c,
        minted options={autogobble,fontsize=\small}
    }
    int main() {
        printf("hello, world");
        return 0;
    }
    % \label{lst:example}
\end{tcblisting}

\begin{myjava}
    public class HelloWorld {
        // A 'Hello World' in Java
        public static void main(String[] args) {
            System.out.println("Hello World!");
        }
    }
\end{myjava}

Listing \ref{sc:firstlisting} contains an example of a listing.
\end{document}
