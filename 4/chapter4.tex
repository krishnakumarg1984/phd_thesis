% -*- root: ../main.tex -*-
%!TEX root = ../main.tex
% this file is called up by main.tex
% content in this file will be fed into the main document

%level followed %by section, subsection


% ----------------------- paths to graphics ------------------------

% change according to folder and file names
\graphicspath{{4/figures/}}
% ----------------------- contents from here ------------------------

Battery modellers face the classic conundrum of conjuring physics-based battery models that remain amenable for control
applications. Firstly, the contrasting nature of this modelling objective is presented. Secondly, prior attempts by the
research community to tackle this issue is briefly examined. A suitable family of models from the broad category of
reduced-order models is identified as a promising candidate for implementation in controls applications. Next, the
drawbacks of this family of models is discussed in detail. The state of the art implementation for tackling these
drawbacks is presented and their inadequacies are discussed.

\todo{write the chapter first. Come back to summarize this.}
The following efforts/trials were done (failures)
\begin{itemize}
    \item first attempt
    \item second attempt
\end{itemize}
The following successes were achieved.
\begin{itemize}
    \item first attempt
    \item second attempt
\end{itemize}

At the end of this chapter, we have a control oriented reduced order battery model amenable for use in real-time
applications for SOC, SOH etc.\ estimations.

Control-Oriented models can be considered synonymous with the term `Reduced Order Models'. This is because the
complexity of physics-based models inherently necessitates the use of a low order model. In this thesis, the two terms
are used interchangeably.

\section{Control-Oriented Time-domain Models}

Jokar~\etal~\cite{Jokar2016} provide a comprehensive review of the various categories of reduced order physics based
battery modelling. However, a notable omission in~\cite{Jokar2016} is the classification of models based upon model
derivation as well as final implementation in the time-vs-frequency domains. Although in principle the transformation
between these domains follows standard mathematical practices \todo{citation needed?}, availability of models for final
implementation in the time domain models aids immediate uptake by industry for online adoption in \gls{bms}. This idea
is so germane to the hypothesis of this chapter \todo{can we form a simple, time-domain model that will get the job
done?}, that the author of this thesis feels compelled to undertake a simpler classification exercise within the context
of adaptability. Furthermore, there is also a need to highlight the salient works among the more recent advances and
extensions to then-prevailing models published since~\cite{Jokar2016}. Hence, the brief review of literature covered in
this section intends to complement and not supplant~\cite{Jokar2016}. In particular, care has been taken to minimize
repetition of background art from that reported in Jokar~\etal{}.

In this work, the model order reduction Physics-based Control-Oriented Models can be classified as belonging to one of
the following categories.

\begin{itemize}
    \item Models obtained through model order reduction of physics based models
    \item Models motivated by physical principles,but formulated directly as reduced order models
    \item A hybrid combination of the above
\end{itemize}

In principle,a modelling method that yields a time-domain mathematical description of physical phenomena that is lower
in computational complexity by an arbitrary magnitude than the original \gls{dfn} model can be considered for further
investigation. In the absence of a quantitative definition of what can be considered as a true reduced order model, the
number of candidate family of models to consider is large and overwhelming. In practice, the constraints of realtime
implementation limits the choice of candidate modelling families. For instance, models relying primarily on classical
finite difference~\cite{Smith2006} and Galerkin Finite Element~\cite{Dao2012} methods for transformation and order
reduction of one or more field variables of the \gls{dfn} model are immediately excluded, owing to the impracticability
of implementing them in a resource-constrained environment.

Owing to the low entry-barrier for adoption in a real-time controller that logs samples of measurement data at specific
time intervals, this thesis focusses on models that are cast for implementation in the time domain. Such a decision
implies the exclusion of those models that are derived and implemented entirely in the frequency-domain. For the
interested reader wishing to peruse the sizeable literature in this field, the discussion here briefly alludes to a few
popular frequency domain modelling techniques.

The Padé approximation method has been widely adopted to yield low order battery models~\cite{Forman2011a}\todo{add other
relevant references here}. Based on a transfer function approach, such models are well-suited for controller design.
However, they are typically limited to such offline applications owing to the trade-offs required in the Padé
approximation order. Traditionally, models truncated to very low order exhibit poor fidelity and perform no better than
classical equivalent circuit models, although recent research attempts have focussed to mitigate this
drawback~\cite{Yuan2017a,Yuan2017}.

Yet another family of models that have gained prominence since the publication of~\cite{Jokar2016} are physics-inspired
equivalent circuit models. \todo{Note that it is a hybrid model Cite a few important ones here including Yuri's latest work}. In these family of
models, the classical equivalent circuit Randles model structure is retained. However, the values of the electrical
circuit components such as series resistance and equivalent capacitance  are obtained through various mechanisms
\todo{such as \ldots}. The biggest advantage of such models is that they serve as drop-in replacements to traditional
equivalent circuit models whilst still retaining their origins in physical principles rather than empirical
curve-fitting. Merla~\etal{}~\cite{Merla2018} introduced an equivalent circuit model that can be parameterised through a
systematic decoupling of the kinetics and diffusion at both electrodes and in the electrolyte. Although these
interacting phenomena can be complex to resolve over all length and time-scales, acceptable trade-offs in accuracy was
demonstrated to be achievable from a system-level simulation perspective. A drawback of such models is that there exists
an ad-hoc attribution of key model parameters such as the diffusion coefficients among the two electrodes through
non-verifiable assumptions. Furthermore, in~\cite{Merla2018}, notable discrepancies exist in the values of parameters
such as electrolyte conductivity (obtained through calculations from \gls{eis} measurements) to that typically reported
in literature. \todo{make remark on intend use and purpose of this model and how Krishna's DRA inspired equivalent
circuit model has a different focus} Yet another effort in this direction  is the author's own efforts based on the
results from the improved DRA reported in~\cref{ch:chapter3}\todo{report future work simulations here}. It should be
emphasised that in these category of models, there is no direct link between the final value of the circuit
components and the physical parameters.

It is important to distinguish between models that are derived directly in the time domain versus those that are derived
first in the frequency domain and later converted to time domain.

Smith~\etal{}~\cite{Smith2007} introduced a 12th order state-space dynamic model capable of predicting the terminal
voltage within 1\% of a full-order \gls{dfn} model. This frequency domain impedance-based model was derived for the
frequency range of interest from \SIrange{0}{10}{\hertz} through Model order reduction of the \gls{dfn} model. The
singular drawback of this model is its extreme complexity for an online implementation. Furthermore, extensive
parametrisation efforts are required \todo{at the end, count and substitute the canonical number of parameters here} to
render the model useful for practical applications. The difficulties associated with such extensive parametric
requirements coupled with inherent uncertainties in such obtained values act as a deterrent to stakeholders outside
academia to adopt this model for online \gls{bms} implementations. Nevertheless, this model was the first of its kind to
provide a physics-based battery model in the classical state-space formulation
\begin{align}
    \dot{x} &= Ax + Bu \\\notag
    y &= Cx + Du
\end{align}

Although the matrices $A, B, C$ and $D$ do not directly involve physical parameters of the \gls{dfn} model, computation
of their numeric values through the model reduction procedure has a direct relationship with them. The presence of 12
states dilutes the effectiveness of state estimation algorithms. In the classical isothermal implementation of this
model, with only output voltage being available to measure, the observablity of the model degrades. Although
observablity analysis was proven in a noise-free context, the presence of process noise (via unmodelled phenomena and
parameter uncertainty) and sensor noise makes this model unattractive for implementation in a vehicular \gls{bms}
application.

The identification of individual parameters of the \gls{dfn} model remains a key area in battery modelling that remains
only partially explored, and is key to implementation of the advanced models and control algorithms.\todo{does this fit
better in the introduction chapter?}. The state of the art in this area, the challenges involved and current efforts in
this direction are explored in~\cref{ch:chapter7}. Although sensitivity analysis of the \gls{dfn} parameters has been
performed in literature, \todo{citation here} the extent to which parameter uncertainties influence the numerical values
in the $A, B, C$ and $D$ matrices has not yet been attempted. In continuation of this research aspect, the order of
magnitude shift in eigen/singular values of the relevant system matrix also need to be quantified to enable an informed
choice about stability of such models for realtime implementations.

A key drawback of Smith~\etal{}~\cite{Smith2007} is the requirement for linearisation at a specific \gls{soc}.
In~\cite{Smith2007}, the operating point was chosen to be 50\% for the derivation of the state-space model. This
counteracts to a high degree, the usability of the model for state estimation tasks, wherein the \gls{soc} is itself the
unknown quantity to be estimated. Furthermore, the need to interpolate between matrices from a look-up table
pre-computed at different states of charge/temperature combinations is an ad-hoc approach to quantifying the model
across the entire operating range of the battery. This renders the robustness of cross-over between models during
state-estimation questionable, and demands the need for smoothing filters and other ad-hoc apparatus to obtain
acceptable \gls{soc} estimations during online operation. The requirement of linearisation also renders the model usable
only for a small range of \gls{soc}s.

Several attempts have been undertaken, with varying degrees of success, to improve and extend this controls-oriented
model from Smith~\etal{}~\cite{Smith2007}.

% \begin{figure}[htb]
% \begin{algorithmic}[1]

% \Procedure{SUM}{ $\{x\}$}

% \State $y\gets0$
% \For{$i \gets 1 : N^{x}$} \Comment{Time series $\{x\}$ has length $N^{x}$}
%    \State $y\gets y+x(i)$ \Comment{Summing up.}
% \EndFor

% \State \textbf{return}  $y$
% \EndProcedure
% \end{algorithmic}
% \caption[Implementation of a algorithm for calculating a sum.]{Implementation of a algorithm for calculating a sum.}
% \label{fig:algorithm1}
% \end{figure}




% ---------------------------------------------------------------------------
%: ----------------------- end of thesis sub-document ------------------------
% ---------------------------------------------------------------------------

